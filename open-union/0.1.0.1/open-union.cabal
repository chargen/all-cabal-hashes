-- BEGIN Added by all-cabal-hashes-tool
x-package-hashes:
    MD5:5c74bed111c7f935dc3114df3e93ddf1
    SHA1:369c5cc87dd8e4858c8799506262fee125cf8f41
    SHA256:1ceb46a9eeb6114a5eb8eeb3805a9d4f218c88cd2f24e42c25271b348b3a7fb6
    SHA512:2575da6b2cc3e94904c92f922ab2de1f74131149ea055a746c97d4f9808ff02a174f8b0ce23348899439931fee628935e7f231a0eeaeda2ff8c031862ea4a9dc
    Skein512_512:69b2f3f0a98471f2ea9322a35b0e224ab473c03a933101c7680d8b51fd4114da0f78d68b1ca986d108e9ed85c56914acbcbfc4e941b2a957c3a8b837ef3831d8

x-package-locations:
    https://hackage.haskell.org/package/open-union-0.1.0.1/open-union-0.1.0.1.tar.gz
    https://s3.amazonaws.com/hackage.fpcomplete.com/package/open-union-0.1.0.1.tar.gz

x-package-size: 3328
-- END Added by all-cabal-hashes-tool

name:               open-union
version:            0.1.0.1
synopsis:           Extensible, type-safe unions.
category:           Data
license:            MIT
license-file:       LICENSE
author:             Ben Foppa
homepage:           https://github.com/RobotGymnast/open-union
maintainer:         benjamin.foppa@gmail.com
build-type:         Simple
cabal-version:      >= 1.9.2
description:
  Extensible, type-safe unions. This package is very new and likely to change.
  .
  Basic usage example (language tags ommitted due to <https://github.com/haskell/cabal/issues/774>)
  .
  > import Data.OpenUnion
  .
  > type MyUnion = Union '[Char, Int, [()]]
  .
  > showMyUnion :: MyUnion -> String
  > showMyUnion
  >     =  (\(c :: Char) -> "char: " ++ show c)
  >     @> (\(i :: Int) -> "int: " ++ show i)
  >     @> (\(l :: [()]) -> "list length: " ++ show (length l))
  >     @> (\(s :: String) -> "string: " ++ s)
  >     @> typesExhausted
  .
  > main :: IO ()
  > main = do
  >     putStrLn $ showMyUnion $ liftUnion (4 :: Int)
  >     putStrLn $ showMyUnion $ liftUnion 'a'
  >     putStrLn $ showMyUnion $ liftUnion [(), ()]
  .
  which prints:
  .
  > int: 4
  > char: 'a'
  > list length: 2
  .
  Casting to an unrelated type does not cause errors;
  In the above example,`showMyUnion` contains a `String` case despite `MyUnion` not containing
  `String` - superfluous cases are ignored, for the time being.
  .
  `typesExhausted` is NOT a catchall. It is a null case, and using it as a catchall
  (or forgetting to provide a certain case, for instance) will result in an error like:
  .
  > example.hs:12:8:
  >     Couldn't match type ‘Int : ('[] :\ [Char])’ with ‘'[]’
  >     Expected type: Union ('[Int] :\ String) -> String
  >       Actual type: Union '[] -> String
  >     In the second argument of ‘(@>)’, namely ‘typesExhausted’
  >     In the second argument of ‘(@>)’, namely
  >       ‘(\ (s :: String) -> "string: " ++ s) @> typesExhausted’
  .
  The left-hand parts of the `':` (think type-level `(:)`) are the cases that still need to be satisfied.
  .
  Trying to lift an incorrect type to a `Union` will cause an error resembling:
  .
  > example.hs:20:30:
  >     No instance for (Data.OpenUnion.Internal.LiftToUnion '[] [Char])
  >       arising from a use of ‘liftUnion’
  >     In the second argument of ‘($)’, namely ‘liftUnion "asdf"’
  >     In the second argument of ‘($)’, namely
  >       ‘showMyUnion $ liftUnion "asdf"’
  >     In a stmt of a 'do' block:
  >       putStrLn $ showMyUnion $ liftUnion "asdf"
  .
  The original use case for this library was code like this (snipped from some record/playback logic):
  .
  > type TrackStates = '[Stopped, Recording, Playing]
  >
  > startRecording
  >   :: Union (TrackStates :\ Recording)
  >   -> ([Note], Union '[Recording])
  .
  The `(:\\)` type-level operator is for removal from a set, i.e.
  `startRecording` can be applied to a track in any state except the
  `Recording` state.

library
    hs-source-dirs:   .
    ghc-options:      -Wall
    exposed-modules:
                  Data.OpenUnion
                  Data.OpenUnion.Internal

    build-depends : base == 4.*

executable example
    hs-source-dirs:   .
    main-is: example.hs
    ghc-options: -Wall -fllvm -O2
    build-depends : base == 4.*
                  , open-union

source-repository head
  type: git
  location: https://github.com/RobotGymnast/open-union.git
