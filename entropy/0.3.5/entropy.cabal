-- BEGIN Added by all-cabal-hashes-tool
package-hashes:
    MD5:da9e144d01634e2892452b3b2a47b18f
    SHA1:38ca79ffb4fb2db186f63c2299010317c1202a0a
    SHA256:a2b991bc5489df23fa392484a87e5431bfa5c9c575870c52a28457ce4a26db57
    SHA512:c9923acaccd05a908fc367f572cee8d6a71a7612f36f054ea38aadcf6a38813c0daba7c8a14c57f409cb5e91ff5a10d7bb4ad902d376fc4295f408d4d863ed9f
    Skein512_512:61eba7f4e56edf05d2171c23bd93533bd5d50687708fc3fd4f33668c708328721911a8c3fbfd7837661c9a95242aa20d90f484eb4b52b6d1571f735b11c0649a

package-locations:
    https://hackage.haskell.org/package/entropy-0.3.5/entropy-0.3.5.tar.gz
    https://s3.amazonaws.com/hackage.fpcomplete.com/package/entropy-0.3.5.tar.gz

package-size: 6478
-- END Added by all-cabal-hashes-tool

name:           entropy
version:        0.3.5
description:    A platform independent method to obtain cryptographically strong entropy
                (RDRAND when available anywhere, urandom on nix, CryptAPI on Windows, patches welcome)
                Users looking for cryptographically strong (number-theoretically
                sound) PRNGs should see the 'DRBG' package too.
synopsis:       A platform independent entropy source
license:        BSD3
license-file:   LICENSE
copyright:      Thomas DuBuisson <thomas.dubuisson@gmail.com>
author:         Thomas DuBuisson <thomas.dubuisson@gmail.com>
maintainer:     Thomas DuBuisson <thomas.dubuisson@gmail.com>
category:       Data, Cryptography
homepage:       https://github.com/TomMD/entropy
bug-reports:    https://github.com/TomMD/entropy/issues
stability:      stable
-- build-type:  Simple
-- ^^ Used for HaLVM
build-type:        Custom
-- ^^ Test for RDRAND support using 'ghc'
cabal-version:  >=1.10
tested-with:    GHC == 7.8.2
-- data-files:
extra-source-files:   ./cbits/rdrand.c, ./cbits/rdrand.h, README.md

-- Notice to compile  with HaLVM the above 'build-type' must be changed
-- to 'Simple' instead of 'Custom'.  The current build system naively
-- runs GHC to determine if the compiler supports RDRAND before proceeding.
flag halvm
    description:        Build for the HaLVM
    default:            False

library
  ghc-options:  -O2
  exposed-modules: System.Entropy
  if os(windows)
    other-modules: System.EntropyWindows
  else {
       if os(halvm)
         other-modules: System.EntropyXen
       else
         other-modules: System.EntropyNix
  }
  other-extensions:    CPP, ForeignFunctionInterface, BangPatterns, ScopedTypeVariables
  build-depends:       base >= 4.3 && < 5, bytestring
  default-language:    Haskell2010
  if(os(halvm))
    cpp-options: -DXEN -DHAVE_RDRAND
    cc-options:  -DXEN -DHAVE_RDRAND
  if arch(x86_64)
    cpp-options: -Darch_x86_64
    cc-options:  -Darch_x86_64
    -- gcc 4.8.2 on i386 fails to compile rdrand.c when using -fPIC!
    c-sources:    cbits/rdrand.c
    include-dirs: cbits
  if arch(i386)
    cpp-options: -Darch_i386
    cc-options:  -Darch_i386
  if os(windows)
    cpp-options: -DisWindows
    cc-options:  -DisWindows
    extra-libraries: advapi32
  else
    if !os(halvm)
       Build-Depends: unix

source-repository head
    type:       git
    location:   https://github.com/TomMD/entropy
