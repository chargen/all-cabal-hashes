name:           entropy
version:        0.3.4
x-revision: 1
description:    A platform independent method to obtain cryptographically strong entropy 
                (RDRAND when available anywhere, urandom on nix, CryptAPI on Windows, patches welcome).
                Users looking for cryptographically strong (number-theoretically
                sound) PRNGs should see the 'DRBG' package too.
synopsis:       A platform independent entropy source
license:        BSD3
license-file:   LICENSE
copyright:      Thomas DuBuisson <thomas.dubuisson@gmail.com>
author:         Thomas DuBuisson <thomas.dubuisson@gmail.com>
maintainer:     Thomas DuBuisson <thomas.dubuisson@gmail.com>
category:       Data, Cryptography
homepage:       https://github.com/TomMD/entropy
bug-reports:    https://github.com/TomMD/entropy/issues
stability:      stable
-- build-type:  Simple
-- ^^ Used for HaLVM
build-type:        Custom
-- ^^ Test for RDRAND support using 'ghc'
cabal-version:  >=1.17
tested-with:    GHC == 7.8.2
-- data-files:
extra-source-files:   ./cbits/rdrand.c, ./cbits/rdrand.h, README.md

-- Notice to compile  with HaLVM the above 'build-type' must be changed
-- to 'Simple' instead of 'Custom'.  The current build system naively
-- runs GHC to determine if the compiler supports RDRAND before proceeding.
flag halvm
    description:        Build for the HaLVM
    default:            False

library
  ghc-options:  -O2
  exposed-modules: System.Entropy
  if os(windows)
    other-modules: System.EntropyWindows
  else {
       if os(halvm)
         other-modules: System.EntropyXen
       else
         other-modules: System.EntropyNix
  }
  other-extensions:    CPP, ForeignFunctionInterface, BangPatterns, ScopedTypeVariables
  build-depends: base >= 4.5 && < 5, bytestring
  default-language:    Haskell2010
  if(os(halvm))
    cpp-options: -DXEN -DHAVE_RDRAND
    cc-options:  -DXEN -DHAVE_RDRAND
  if arch(x86_64)
    cpp-options: -Darch_x86_64
    cc-options:  -Darch_x86_64
    -- gcc 4.8.2 on i386 fails to compile rdrand.c when using -fPIC!
    c-sources:    cbits/rdrand.c
    include-dirs: cbits
  if arch(i386)
    cpp-options: -Darch_i386
    cc-options:  -Darch_i386
  if os(windows)
    cpp-options: -DisWindows
    cc-options:  -DisWindows
    extra-libraries: advapi32
  else
    if !os(halvm)
       Build-Depends: unix

source-repository head
    type:       git
    location:   https://github.com/TomMD/entropy


package-hashes:
    MD5:e1de82bcdebc64ccc49d085177b34565
    SHA1:dc778ee495d04875039ef67698ab29b98547a1cd
    SHA256:0083354ae410606c0c42138bc84602be5744c040898c0652cbc0fd4466de0ece
    SHA512:604abfd74db4c7a141783a60ff93313433dd327738846699adef7ed59f28a7bb4f13c98016f49a9b3db292886ab3493edc58340fccebfecc5d220b0c0009bc4a
    Skein512_512:af0bd923b9346a2c4be0b16f3871c9ddb1c9e4fd57c710274295418807e53d35025412c91800f9c235d224e1748071ed7639c68f99cafbcd9bb09407e9815ac7

package-locations:
    https://hackage.haskell.org/package/entropy-0.3.4/entropy-0.3.4.tar.gz
    https://s3.amazonaws.com/hackage.fpcomplete.com/package/entropy-0.3.4.tar.gz

