
name:                array-primops
version:             0.1.0.0
synopsis:            Extra foreign primops for primitive arrays
license:             BSD3
license-file:        LICENSE
author:              Andr치s Kov치cs
maintainer:          puttamalac@gmail.com
copyright:           2015 Andr치s Kov치cs
category:            Data
build-type:          Simple
cabal-version:       >=1.10     

description:

  Boxed arrays cannot be allocated without initialization, because in that case the garbage collector would try to follow wild pointers. This is a source of inefficiency; quite a few operations must allocate a new array, initialize it, then overwrite the initial elements with the actually relevant data. This package provides low-level primitives for doing such operations without superfluous copying. 

source-repository head
  type:     git
  location: https://github.com/AndrasKovacs/array-primops.git

library
  default-language: Haskell2010

  if impl(ghc >= 7.8)

    exposed-modules:
      GHC.Prim.Array

    build-depends:
      base >= 4.7 && <4.9 ,
      ghc-prim >= 0.3.1.0

    c-sources:
      cbits/array.cmm 
 
    if impl(ghc >= 7.10)
    
      exposed-modules:
        GHC.Prim.SmallArray

      build-depends:
        ghc-prim >= 0.4.0.0

      c-sources:
        cbits/smallArray.cmm


benchmark benchmarks
  default-language: Haskell2010
  hs-source-dirs: . benchmarks

  main-is: Benchmarks.hs
  type: exitcode-stdio-1.0

  build-depends:
    base,
    ghc-prim,
    criterion >= 1.0

  c-sources: 
    cbits/array.cmm,
    cbits/smallArray.cmm

  ghc-options: -O2 -fllvm


package-hashes:
    MD5:c365ab4bc6b29a6c7ae0b34374d56401
    SHA1:8e4dbb061ca33cd64b2b1150b449e8ca47060e3b
    SHA256:dd181c8211dee3b4c13066fc7f58e599dd0d0d7990c1082583d2ed68807e1c87
    SHA512:0c45e6142ac856afdc28cb9c5178b0273879c3ab05e458dedb6f10ca04bbfb8a05b17d72af2654756bf15402fb61b2ceff374d13c483f5207b8fc3e586357930
    Skein512_512:9118db90c3e8bc7bcc8cb66319c68affa4863c2786610b0722464ee8b2c481c0c3dba33c457400f7071757ed0d70fb1fc33eae2961afaebbf41e71d91ec697dc

package-locations:
    https://hackage.haskell.org/package/array-primops-0.1.0.0/array-primops-0.1.0.0.tar.gz
    https://s3.amazonaws.com/hackage.fpcomplete.com/package/array-primops-0.1.0.0.tar.gz

