name:               stm-delay
version:            0.1.1
synopsis:           Updatable one-shot timer polled with STM
description:
    This library lets you create a one-shot timer, poll it using STM,
    and update it to ring at a different time than initially specified.
    .
    It uses GHC event manager timeouts when available
    (GHC 7.2+, @-threaded@, non-Windows OS), yielding performance similar
    to @threadDelay@ and @registerDelay@.  Otherwise, it falls back to
    forked threads and @threadDelay@.
    .
    [0.1.1]
        Add tryWaitDelayIO, improve performance for certain cases of @newDelay@
        and @updateDelay@, and improve example.
homepage:           https://github.com/joeyadams/haskell-stm-delay
license:            BSD3
license-file:       LICENSE
author:             Joey Adams
maintainer:         joeyadams3.14159@gmail.com
copyright:          Copyright (c) Joseph Adams 2012
category:           System
build-type:         Simple
cabal-version:      >= 1.8

source-repository head
    type:       git
    location:   git://github.com/joeyadams/haskell-stm-delay.git

library
    exposed-modules:
        Control.Concurrent.STM.Delay

    ghc-options: -Wall -fwarn-tabs

    build-depends: base >= 4.3 && < 5
                 , stm

    -- Need base >= 4.3 for:
    --
    --  * Control.Exception.mask
    --
    --  * forkIOUnmasked
    --
    --  * A threadDelay that doesn't give (-1) magic treatment.
    --    See http://hackage.haskell.org/trac/ghc/ticket/2892
    --
    --  * GHC.Event (called System.Event in base 4.3)

test-suite test
    type: exitcode-stdio-1.0

    hs-source-dirs: test
    main-is: Main.hs

    ghc-options: -Wall
                 -fno-warn-missing-signatures
                 -fno-warn-name-shadowing
                 -fno-warn-unused-do-bind
                 -fno-warn-unused-matches

    build-depends: base >= 4.3 && < 5
                 , stm
                 , stm-delay

test-suite test-threaded
    type: exitcode-stdio-1.0

    hs-source-dirs: test
    main-is: Main.hs

    ghc-options: -Wall -threaded
                 -fno-warn-missing-signatures
                 -fno-warn-name-shadowing
                 -fno-warn-unused-do-bind
                 -fno-warn-unused-matches

    build-depends: base >= 4.3 && < 5
                 , stm
                 , stm-delay


package-hashes:
    MD5:093d04c518623b52bf4286fabc35039b
    SHA1:5510ffac6f00ae1b727908e5e2d79843cfba6e93
    SHA256:3440b5d70cee38f1823999829a3450172c7606988331c64e7bbb090667cd83ec
    SHA512:b8b9d41cd876f0eafc5b974958c3884d2bdf9b31d9fd6abefa2606b8ac4dbe9e13a6cf1e95ccd3d322fdfb9623314a519ba177fb6924b88b3f881323a437e021
    Skein512_512:420406baab8597995b396bc8006eb7d74ddf022908c30b89046df26e65d5080fdc04479134ae8d3a734414d3266b299d45253e7709d843c9e4d8a3a2a64972c9

package-locations:
    https://hackage.haskell.org/package/stm-delay-0.1.1/stm-delay-0.1.1.tar.gz
    https://s3.amazonaws.com/hackage.fpcomplete.com/package/stm-delay-0.1.1.tar.gz

